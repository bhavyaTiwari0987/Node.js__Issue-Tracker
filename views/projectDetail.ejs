<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Project Detail - Issue Tracker</title>
		<link rel="stylesheet" href="/css/styleProjectDetail.css">
	</head>
	<body>
		<header>
			<div class="logo">Issue Tracker</div>
			<a href="/" class="home-btn">Home</a>
		</header>
		<main>
			<h1 class="section-heading"><%= project.name %></h1>
			<p><%= project.description %></p>
			<div class="filter-container">
				<form id="filter-form" action="">
					<label for="labels">Filter by labels:</label>
					<select id="labels" name="labels" multiple>
						<% project.labels.forEach(function(label) { %>
							<option value="<%= label %>"><%= label %></option>
						<% }); %>
					</select>
					<label for="author">Filter by author:</label>
					<select id="author" name="author">
						<option value="">All</option>
						<% project.authors.forEach(function(author) { %>
							<option value="<%= author %>"><%= author %></option>
						<% }); %>
					</select>
					<label for="search">Search:</label>
					<input type="text" id="search" name="search" placeholder="Title or description">
					<button type="submit">Filter</button>
				</form>
				<a href="/projects/<%= project.id %>/issues/create" class="create-issue-btn">Create Issue</a>
			</div>
			<ul class="issue-list">
				<% if (issues.length === 0) { %>
					<p>No issues found.</p>
				<% } else { %>
					<% issues.forEach(function(issue) { %>
						<li class="issue">
							<h2><a href="/projects/<%= project.id %>/issues/<%= issue.id %>"><%= issue.title %></a></h2>
							<p><%= issue.description %></p>
							<div class="labels">
								<% issue.labels.forEach(function(label) { %>
									<span class="label"><%= label %></span>
								<% }); %>
							</div>
							<div class="meta">
								<span class="author"><%= issue.author %></span>
								<span class="date"><%= issue.date %></span>
							</div>
						</li>
					<% }); %>
				<% } %>
			</ul>
		</main>
		<script src="/js/app.js"></script>
	</body>
</html>
